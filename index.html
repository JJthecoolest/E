<!DOCTYPE html>
<html>
<head>
<title>New Tab</title>
</head>

<body>

<div class="topnav">
  <input type="password" placeholder="Type Here" id="pass">
</div>

<button onclick="enter()">enter</button>

<script>
const PASS_HASH = "10c366908fcc4e86ed9a013c2c8e9b054047a74844d7eb7d068250f085342986";

const gamePromise = fetch(
  "https://cdn.jsdelivr.net/gh/radmanplays/Eaglercraft-1.21@refs/heads/main/index.html?t=" + Date.now()
).then(r => r.text());

// ----------------------------

async function sha256(text) {
  const data = new TextEncoder().encode(text);
  const hash = await crypto.subtle.digest("SHA-256", data);
  return Array.from(new Uint8Array(hash))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
}

async function Opensite() {
  const win = window.open("about:blank", "_blank");

  const response = await fetch(
    "https://cdn.jsdelivr.net/gh/JJthecoolest/goon@master/singlefile.html?t=" + Date.now()
  );

  const text = await response.text();

  win.document.open();
  win.document.write(text);
  win.document.close();
}

async function loadGameHereFast() {
  const html = await gamePromise;
  document.open();
  document.write(html);
  document.close();
}

async function enter() {
  const input = document.getElementById("pass").value;
  const hash = await sha256(input);

  if (hash === PASS_HASH) {
    Opensite();
  } else {
    loadGameHereFast();
  }
}
</script>

</body>
</html>
